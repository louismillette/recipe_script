import json
import os
import requests

class API():
	def _load_credentials(self):
		secret_file = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'secrets.txt')
		with open(secret_file, 'r') as file:
			self.apikey = file.readline().replace('\n', '')
		return self.apikey

	def call_recipes_api(self, ingredients, ignorePantry, number):
		return [{'id': 667373, 'title': 'Frying Pan Okra', 'image': 'https://spoonacular.com/recipeImages/667373-312x231.jpg', 'imageType': 'jpg', 'usedIngredientCount': 2, 'missedIngredientCount': 2, 'missedIngredients': [{'id': 1001, 'amount': 1.0, 'unit': 'tablespoon', 'unitLong': 'tablespoon', 'unitShort': 'Tbsp', 'aisle': 'Milk, Eggs, Other Dairy', 'name': 'butter', 'original': '1 tablespoon butter', 'originalString': '1 tablespoon butter', 'originalName': 'butter', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/butter-sliced.jpg'}, {'id': 11278, 'amount': 1.0, 'unit': 'pound', 'unitLong': 'pound', 'unitShort': 'lb', 'aisle': 'Produce', 'name': 'okra', 'original': '1 pound fresh okra, sliced in 1/8 inch pieces', 'originalString': '1 pound fresh okra, sliced in 1/8 inch pieces', 'originalName': 'fresh okra, sliced in 1/8 inch pieces', 'metaInformation': ['fresh', 'sliced in 1/8 inch pieces'], 'meta': ['fresh', 'sliced in 1/8 inch pieces'], 'extendedName': 'fresh okra', 'image': 'https://spoonacular.com/cdn/ingredients_100x100/okra.png'}], 'usedIngredients': [{'id': 2043, 'amount': 1.5, 'unit': 'teaspoons', 'unitLong': 'teaspoons', 'unitShort': 'tsp', 'aisle': 'Spices and Seasonings', 'name': 'ground turmeric', 'original': '1 1/2 teaspoons ground turmeric', 'originalString': '1 1/2 teaspoons ground turmeric', 'originalName': 'ground turmeric', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/turmeric.jpg'}, {'id': 11282, 'amount': 3.0, 'unit': '', 'unitLong': '', 'unitShort': '', 'aisle': 'Produce', 'name': 'onions', 'original': '3 onions, sliced', 'originalString': '3 onions, sliced', 'originalName': 'onions, sliced', 'metaInformation': ['sliced'], 'meta': ['sliced'], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}], 'unusedIngredients': [], 'likes': 2}, {'id': 205843, 'title': "The Secret Ingredient (Turmeric): Maman's Yellow Peas and Onions", 'image': 'https://spoonacular.com/recipeImages/205843-312x231.jpg', 'imageType': 'jpg', 'usedIngredientCount': 2, 'missedIngredientCount': 3, 'missedIngredients': [{'id': 4053, 'amount': 2.0, 'unit': 'tablespoons', 'unitLong': 'tablespoons', 'unitShort': 'Tbsp', 'aisle': 'Oil, Vinegar, Salad Dressing', 'name': 'olive oil', 'original': '2 tablespoons olive oil', 'originalString': '2 tablespoons olive oil', 'originalName': 'olive oil', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/olive-oil.jpg'}, {'id': 11304, 'amount': 2.0, 'unit': 'pounds', 'unitLong': 'pounds', 'unitShort': 'lb', 'aisle': 'Produce', 'name': 'peas', 'original': '2 pounds frozen peas', 'originalString': '2 pounds frozen peas', 'originalName': 'frozen peas', 'metaInformation': ['frozen'], 'meta': ['frozen'], 'extendedName': 'frozen peas', 'image': 'https://spoonacular.com/cdn/ingredients_100x100/peas.jpg'}, {'id': 2047, 'amount': 4.0, 'unit': 'servings', 'unitLong': 'servings', 'unitShort': 'servings', 'aisle': 'Spices and Seasonings', 'name': 'salt', 'original': 'Salt', 'originalString': 'Salt', 'originalName': 'Salt', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/salt.jpg'}], 'usedIngredients': [{'id': 2043, 'amount': 1.5, 'unit': 'teaspoons', 'unitLong': 'teaspoons', 'unitShort': 'tsp', 'aisle': 'Spices and Seasonings', 'name': 'turmeric', 'original': '1 1/2 teaspoons turmeric', 'originalString': '1 1/2 teaspoons turmeric', 'originalName': 'turmeric', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/turmeric.jpg'}, {'id': 10511282, 'amount': 1.0, 'unit': 'large', 'unitLong': 'large', 'unitShort': 'large', 'aisle': 'Produce', 'name': 'yellow onion', 'original': '1 large yellow onion, finely diced', 'originalString': '1 large yellow onion, finely diced', 'originalName': 'yellow onion, finely diced', 'metaInformation': ['diced', 'yellow', 'finely'], 'meta': ['diced', 'yellow', 'finely'], 'extendedName': 'diced yellow onion', 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}], 'unusedIngredients': [{'id': 11282, 'amount': 1.0, 'unit': 'serving', 'unitLong': 'serving', 'unitShort': 'serving', 'aisle': 'Produce', 'name': 'onions', 'original': 'onions', 'originalString': 'onions', 'originalName': 'onions', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}], 'likes': 57}, {'id': 248487, 'title': 'Soy-Free Turmeric Fried Rice', 'image': 'https://spoonacular.com/recipeImages/248487-312x231.jpg', 'imageType': 'jpg', 'usedIngredientCount': 2, 'missedIngredientCount': 3, 'missedIngredients': [{'id': 10020444, 'amount': 180.0, 'unit': 'g', 'unitLong': 'grams', 'unitShort': 'g', 'aisle': 'Pasta and Rice', 'name': 'basmati rice', 'original': '180g Basmati Rice', 'originalString': '180g Basmati Rice', 'originalName': 'Basmati Rice', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/rice-white-long-grain-or-basmatii-cooked.jpg'}, {'id': 4582, 'amount': 2.0, 'unit': 'tbsp', 'unitLong': 'tablespoons', 'unitShort': 'Tbsp', 'aisle': 'Oil, Vinegar, Salad Dressing', 'name': 'cooking oil', 'original': '2 tbsp Oil to fry', 'originalString': '2 tbsp Oil to fry', 'originalName': 'Oil to fry', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/vegetable-oil.jpg'}, {'id': 11215, 'amount': 1.0, 'unit': '', 'unitLong': '', 'unitShort': '', 'aisle': 'Produce', 'name': 'garlic clove', 'original': '1 Garlic clove', 'originalString': '1 Garlic clove', 'originalName': 'Garlic clove', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/garlic.png'}], 'usedIngredients': [{'id': 2043, 'amount': 2.0, 'unit': 'tbsp', 'unitLong': 'tablespoons', 'unitShort': 'Tbsp', 'aisle': 'Spices and Seasonings', 'name': 'ground turmeric', 'original': '2 tbsp Ground Turmeric', 'originalString': '2 tbsp Ground Turmeric', 'originalName': 'Ground Turmeric', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/turmeric.jpg'}, {'id': 11291, 'amount': 2.0, 'unit': '', 'unitLong': '', 'unitShort': '', 'aisle': 'Produce', 'name': 'spring onions', 'original': '2 Spring onions', 'originalString': '2 Spring onions', 'originalName': 'Spring onions', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/spring-onions.jpg'}], 'unusedIngredients': [{'id': 11282, 'amount': 1.0, 'unit': 'serving', 'unitLong': 'serving', 'unitShort': 'serving', 'aisle': 'Produce', 'name': 'onions', 'original': 'onions', 'originalString': 'onions', 'originalName': 'onions', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}], 'likes': 8}, {'id': 117362, 'title': 'Curried Onions', 'image': 'https://spoonacular.com/recipeImages/117362-312x231.jpg', 'imageType': 'jpg', 'usedIngredientCount': 2, 'missedIngredientCount': 3, 'missedIngredients': [{'id': 2012, 'amount': 0.5, 'unit': 'cup', 'unitLong': 'cups', 'unitShort': 'cup', 'aisle': 'Spices and Seasonings', 'name': 'coriander', 'original': '1/2 cup coriander, leaf chopped', 'originalString': '1/2 cup coriander, leaf chopped', 'originalName': 'coriander, leaf chopped', 'metaInformation': ['chopped'], 'meta': ['chopped'], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/ground-coriander.jpg'}, {'id': 93605, 'amount': 1.0, 'unit': 'teaspoon', 'unitLong': 'teaspoon', 'unitShort': 'tsp', 'aisle': 'Ethnic Foods', 'name': 'curry paste', 'original': '1 teaspoon curry powder or curry paste', 'originalString': '1 teaspoon curry powder or curry paste', 'originalName': 'curry powder or curry paste', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/chili-paste.png'}, {'id': 4582, 'amount': 1.0, 'unit': 'teaspoon', 'unitLong': 'teaspoon', 'unitShort': 'tsp', 'aisle': 'Oil, Vinegar, Salad Dressing', 'name': 'oil', 'original': '1 teaspoon oil', 'originalString': '1 teaspoon oil', 'originalName': 'oil', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/vegetable-oil.jpg'}], 'usedIngredients': [{'id': 10511282, 'amount': 2.0, 'unit': '', 'unitLong': '', 'unitShort': '', 'aisle': 'Produce', 'name': 'brown onions', 'original': '2-3 brown onions, finely chopped', 'originalString': '2-3 brown onions, finely chopped', 'originalName': 'brown onions, finely chopped', 'metaInformation': ['finely chopped'], 'meta': ['finely chopped'], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}, {'id': 2043, 'amount': 1.0, 'unit': 'teaspoon', 'unitLong': 'teaspoon', 'unitShort': 'tsp', 'aisle': 'Spices and Seasonings', 'name': 'turmeric powder', 'original': '1 teaspoon turmeric powder', 'originalString': '1 teaspoon turmeric powder', 'originalName': 'turmeric powder', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/turmeric.jpg'}], 'unusedIngredients': [{'id': 11282, 'amount': 1.0, 'unit': 'serving', 'unitLong': 'serving', 'unitShort': 'serving', 'aisle': 'Produce', 'name': 'onions', 'original': 'onions', 'originalString': 'onions', 'originalName': 'onions', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}], 'likes': 0}, {'id': 541791, 'title': 'Deviled Eggs', 'image': 'https://spoonacular.com/recipeImages/541791-312x231.png', 'imageType': 'png', 'usedIngredientCount': 2, 'missedIngredientCount': 4, 'missedIngredients': [{'id': 1002046, 'amount': 0.5, 'unit': 'tsp', 'unitLong': 'teaspoons', 'unitShort': 'tsp', 'aisle': 'Condiments', 'name': 'dijon mustard', 'original': '½ tsp dijon mustard', 'originalString': '½ tsp dijon mustard', 'originalName': 'dijon mustard', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/dijon-mustard.jpg'}, {'id': 1123, 'amount': 6.0, 'unit': '', 'unitLong': '', 'unitShort': '', 'aisle': 'Milk, Eggs, Other Dairy', 'name': 'egg', 'original': '6 hard boiled egg, sliced and the yolk and egg separated', 'originalString': '6 hard boiled egg, sliced and the yolk and egg separated', 'originalName': 'hard boiled egg, sliced and the yolk and egg separated', 'metaInformation': ['hard', 'boiled', 'separated', 'sliced'], 'meta': ['hard', 'boiled', 'separated', 'sliced'], 'extendedName': 'cooked egg', 'image': 'https://spoonacular.com/cdn/ingredients_100x100/egg.png'}, {'id': 4025, 'amount': 0.25, 'unit': 'cup', 'unitLong': 'cups', 'unitShort': 'cup', 'aisle': 'Condiments', 'name': 'mayo', 'original': '¼ cup plus 1 tbsp mayo', 'originalString': '¼ cup plus 1 tbsp mayo', 'originalName': 'mayo', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/mayonnaise.png'}, {'id': 2028, 'amount': 3.0, 'unit': 'servings', 'unitLong': 'servings', 'unitShort': 'servings', 'aisle': 'Spices and Seasonings', 'name': 'paprika', 'original': 'paprika for garnish', 'originalString': 'paprika for garnish', 'originalName': 'paprika for garnish', 'metaInformation': ['for garnish'], 'meta': ['for garnish'], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/paprika.jpg'}], 'usedIngredients': [{'id': 11282, 'amount': 0.25, 'unit': 'tsp', 'unitLong': 'teaspoons', 'unitShort': 'tsp', 'aisle': 'Produce', 'name': 'onion', 'original': '¼ tsp onion power', 'originalString': '¼ tsp onion power', 'originalName': 'onion power', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/brown-onion.png'}, {'id': 2043, 'amount': 0.25, 'unit': 'tsp', 'unitLong': 'teaspoons', 'unitShort': 'tsp', 'aisle': 'Spices and Seasonings', 'name': 'turmeric', 'original': '¼ tsp turmeric', 'originalString': '¼ tsp turmeric', 'originalName': 'turmeric', 'metaInformation': [], 'meta': [], 'image': 'https://spoonacular.com/cdn/ingredients_100x100/turmeric.jpg'}], 'unusedIngredients': [], 'likes': 35}]
		apikey = self._load_credentials()
		results = requests.get(url = 'https://api.spoonacular.com/recipes/findByIngredients',
		             params = {
			             'ingredients': ingredients,
			             'ignorePantry': ignorePantry,
			             'number': number,
			             'apiKey': apikey,
		             })
		return results.json()

	def search_ingrediant(self, ingredient):
		return {'totalResults': 1}
		apikey = self._load_credentials()
		results = requests.get(url = 'https://api.spoonacular.com/food/ingredients/search',
		             params = {
			             'query': ingredient,
			             'apiKey': apikey,
		             })
		return results.json()

	def get_recipe_price_breakdown(self, recipie_id):
		apikey = self._load_credentials()
		results = requests.get(f'https://api.spoonacular.com/recipes/{recipie_id}/priceBreakdownWidget.json?apiKey={apikey}')
		return results.json()


